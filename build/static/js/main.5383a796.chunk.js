(this.webpackJsonptodolist_typescript=this.webpackJsonptodolist_typescript||[]).push([[0],{260:function(t,e,n){},261:function(t,e,n){"use strict";n.r(e);var r,a=n(0),c=n(40),s=n.n(c),o=n(60),i=n(50),u=n(263),d=n(22),l=n(66),j=n(270),p=n(268),O=n(266),h=n(5),b=n(265),f=n(267),x=n(151),m=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435";return{required:!0,message:t}},T=o.c,E=n(64),g=n(1),v=n(16),S=n.n(v),y=n(34),_=n(49),I=n.n(_);function L(t,e){var n=new Date,r=e;n.setTime(n.getTime()+6048e5),document.cookie=t+"="+r+"; expires="+n.toUTCString()+"; path=/"}function D(t){var e=("; "+document.cookie).split("; "+t+"=");if(2===e.length){var n=e.pop();if(n)return n.split(";").shift()}}function k(t){var e=new Date;e.setTime(e.getTime()+-864e5),document.cookie=t+"=; expires="+e.toUTCString()+"; path=/"}!function(t){t.GET_TODO="GET_TODO",t.ADD_TODO="ADD_TODO",t.UPDATE_TODO="UPDATE_TODO",t.DELETE_TODO="DELETE_TODO",t.SET_IS_LOADING="SET_IS_LOADING",t.SET_ERROR="SET_ERROR"}(r||(r={}));var A,w="https://api-nodejs-todolist.herokuapp.com/task",R={setIsLoading:function(t){return{type:r.SET_IS_LOADING,payload:t}},setError:function(t){return{type:r.SET_ERROR,payload:t}},getTodo:function(t){return{type:r.GET_TODO,payload:t}},addTodo:function(t){return{type:r.ADD_TODO,payload:t}},updTodo:function(t){return{type:r.UPDATE_TODO,payload:t}},delTodo:function(t){return{type:r.DELETE_TODO,payload:t}},getTodoList:function(t){return function(){var e=Object(y.a)(S.a.mark((function e(n){var r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n(R.setIsLoading(!0)),e.next=4,I.a.get(w,{headers:{Authorization:t}});case 4:200===(r=e.sent).status&&n(R.getTodo(r.data.data)),n(R.setIsLoading(!1)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),n(R.setError("\u0423\u043f\u0441! \u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a"));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},createTodo:function(t,e,n){return function(){var r=Object(y.a)(S.a.mark((function r(a){var c;return S.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,e(!0),r.next=4,I.a.post(w,{description:t},{headers:{Authorization:n}});case 4:201===(c=r.sent).status&&a(R.addTodo(c.data.data)),e(!1),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),a(R.setError("\u041f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u0442\u0430\u0441\u043a\u0438 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430"));case 12:case"end":return r.stop()}}),r,null,[[0,9]])})));return function(t){return r.apply(this,arguments)}}()},updateTodo:function(t,e,n){return function(){var r=Object(y.a)(S.a.mark((function r(a){var c;return S.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,I.a.put("".concat(w,"/").concat(t),{completed:e},{headers:{Authorization:n}});case 3:200===(c=r.sent).status&&a(R.updTodo(c.data.data)),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),a(R.setError("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a"));case 10:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(t){return r.apply(this,arguments)}}()},deleteTodo:function(t,e){return function(){var n=Object(y.a)(S.a.mark((function n(r){return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,I.a.delete("".concat(w,"/").concat(t),{headers:{Authorization:e}});case 3:200===n.sent.status&&r(R.delTodo(t)),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),r(R.setError("\u041f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430"));case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(t){return n.apply(this,arguments)}}()}};!function(t){t.SET_AUTH="SET_AUTH",t.SET_USER="SET_USER",t.SET_ERROR="SET_ERROR",t.SET_IS_LOADING="SET_IS_LOADING",t.SET_IS_SUCCESS="SET_IS_SUCCESS"}(A||(A={}));var N,C="https://api-nodejs-todolist.herokuapp.com/user",U={Authorization:"Bearer ".concat(D("token"))},G={setUser:function(t){return{type:A.SET_USER,payload:t}},setIsAuth:function(t){return{type:A.SET_AUTH,payload:t}},setIsLoading:function(t){return{type:A.SET_IS_LOADING,payload:t}},setIsSuccess:function(t){return{type:A.SET_IS_SUCCESS,payload:t}},setError:function(t){return{type:A.SET_ERROR,payload:t}},getCurrentUser:function(){return function(){var t=Object(y.a)(S.a.mark((function t(e){var n;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,I.a.get("".concat(C,"/me"),{headers:Object(g.a)({},U)});case 3:200===(n=t.sent).status&&e(G.setUser(n.data)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e(G.setError("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u0432 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438"));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},registration:function(t){return function(){var e=Object(y.a)(S.a.mark((function e(n){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n(G.setIsLoading(!0)),e.next=4,I.a.post("".concat(C,"/register"),t);case 4:201===e.sent.status?(n(G.setIsSuccess(!0)),setTimeout((function(){n(G.setIsSuccess(!1))}),4e3)):n(G.setIsSuccess(!1)),n(G.setIsLoading(!1)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),e.t0.response.status>="404"?n(G.setError("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043a\u0430\u043a\u0430\u044f-\u0442\u043e \u043e\u0448\u0438\u0431\u043a\u0430")):(n(G.setError("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0442\u0430\u043a\u0438\u043c Email \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442")),setTimeout((function(){n(G.setError(""))}),4e3));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},login:function(t,e){return function(){var n=Object(y.a)(S.a.mark((function n(r){var a;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r(G.setIsLoading(!0)),n.next=4,I.a.post("".concat(C,"/login"),{email:t,password:e});case 4:200===(a=n.sent).status&&(L("token","".concat(a.data.token)),r(G.setUser(a.data.user)),r(G.setIsAuth(!0))),r(G.setIsLoading(!1)),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),r(G.setError("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c"));case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(t){return n.apply(this,arguments)}}()},logout:function(){return function(){var t=Object(y.a)(S.a.mark((function t(e){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:k("token"),e(G.setError("")),e(G.setIsAuth(!1)),e(R.getTodo([]));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},z=Object(g.a)(Object(g.a)({},G),R),P=function(){var t=Object(o.b)();return Object(E.b)(z,t)},H=n(6),F=function(){var t=T((function(t){return t.auth})),e=t.error,n=t.isLoading,r=Object(a.useState)(""),c=Object(h.a)(r,2),s=c[0],o=c[1],u=Object(a.useState)(""),d=Object(h.a)(u,2),l=d[0],j=d[1],p=P().login;return Object(H.jsxs)(b.a,{onFinish:function(){p(s,l)},children:[e&&Object(H.jsx)("div",{style:{color:"red"},children:e}),Object(H.jsx)(b.a.Item,{label:"Email",name:"email",rules:[m("\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u0432\u0432\u0435\u0434\u0438\u0442\u0435 email")],children:Object(H.jsx)(f.a,{type:"email",onChange:function(t){return o(t.target.value)},value:s,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 email"})}),Object(H.jsx)(b.a.Item,{label:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",rules:[m("\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c!")],children:Object(H.jsx)(f.a.Password,{value:l,onChange:function(t){return j(t.target.value)},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"})}),Object(H.jsxs)(b.a.Item,{children:[Object(H.jsx)(x.a,{type:"primary",htmlType:"submit",loading:n,children:"\u0412\u043e\u0439\u0442\u0438"}),Object(H.jsx)(i.b,{to:"/registration",children:Object(H.jsx)(x.a,{type:"default",style:{float:"right"},children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})})]})]})},B=function(){var t=T((function(t){return t.auth})).isSuccess;return Object(H.jsxs)(u.a,{children:[t&&Object(H.jsx)(p.a,{message:"Success",description:"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0435\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c",type:"success",showIcon:!0,style:{position:"absolute",left:"0",right:"0",top:"64px"}}),Object(H.jsx)(l.a,{justify:"center",align:"middle",className:"h100",children:Object(H.jsx)(O.a,{children:Object(H.jsx)(F,{})})})]})},V=n(264),J=n(269),q=function(){var t=Object(a.useState)(""),e=Object(h.a)(t,2),n=e[0],r=e[1],c=Object(a.useState)(!1),s=Object(h.a)(c,2),o=s[0],i=s[1],u=T((function(t){return t.todo})),d=u.todoList,j=u.isLoading,p=P(),O=p.getTodoList,b=p.createTodo,x=p.updateTodo,m=p.deleteTodo,E=D("token")||"";Object(a.useEffect)((function(){O(E)}),[]);return j?Object(H.jsx)(l.a,{justify:"center",align:"middle",className:"h100",children:Object(H.jsx)(V.a,{tip:"Loading..."})}):Object(H.jsxs)("div",{className:"todo-list",children:[Object(H.jsx)(f.a.Search,{value:n,placeholder:"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0437\u0430\u0434\u0430\u0447\u0443",enterButton:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",size:"large",style:{maxWidth:"520px",padding:"10px 10px 5px 10px",margin:"0 auto"},onChange:function(t){return r(t.target.value)},onSearch:function(){n&&(b(n,i,E),r(""))},loading:o}),Object(H.jsx)("div",{className:"todo-list__items",children:d.map((function(t){return Object(H.jsxs)("div",{className:"todo-list__item",children:[Object(H.jsx)("div",{className:"todo-list__descr",style:{width:"100%"},children:Object(H.jsx)(J.a,{checked:t.completed,style:{width:"100%",textDecoration:"".concat(t.completed?"line-through":"none")},onChange:function(e){return x(t._id,e.target.checked,E)},children:t.description})}),Object(H.jsx)("i",{className:"far fa-times-circle todo-list__btn",onClick:function(){return m(t._id,E)},style:{fontSize:"19px",cursor:"pointer"}})]},t._id)}))})]})},W=function(){return Object(H.jsx)(u.a,{style:{display:"block"},children:Object(H.jsx)(q,{})})},K=function(){var t=T((function(t){return t.auth})),e=t.isSuccess,n=t.isLoading,r=Object(a.useState)(""),c=Object(h.a)(r,2),s=c[0],o=c[1],u=Object(a.useState)(""),l=Object(h.a)(u,2),j=l[0],p=l[1],O=Object(a.useState)(""),E=Object(h.a)(O,2),g=E[0],v=E[1],S=P().registration;return Object(H.jsxs)(H.Fragment,{children:[e&&Object(H.jsx)(d.a,{to:"/login"}),Object(H.jsxs)(b.a,{onFinish:function(){S({email:g,password:j,name:s})},children:[Object(H.jsx)(b.a.Item,{label:"Email",name:"email",rules:[m("\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u0432\u0432\u0435\u0434\u0438\u0442\u0435 email!")],children:Object(H.jsx)(f.a,{type:"email",onChange:function(t){return v(t.target.value)},value:g})}),Object(H.jsx)(b.a.Item,{label:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",name:"username",rules:[m("\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f!")],children:Object(H.jsx)(f.a,{onChange:function(t){return o(t.target.value)},value:s})}),Object(H.jsx)(b.a.Item,{label:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",rules:[m("\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c!")],children:Object(H.jsx)(f.a.Password,{value:j,onChange:function(t){return p(t.target.value)},minLength:8})}),Object(H.jsxs)(b.a.Item,{children:[Object(H.jsx)(x.a,{type:"primary",htmlType:"submit",loading:n,children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"}),Object(H.jsx)(i.b,{to:"/login",children:Object(H.jsx)(x.a,{type:"link",style:{float:"right"},children:"\u0423\u0436\u0435 \u0435\u0441\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442?"})})]})]})]})},M=function(){var t=T((function(t){return t.auth})).error;return Object(H.jsxs)(u.a,{children:[t&&Object(H.jsx)(p.a,{message:"Error",description:t,type:"error",showIcon:!0,style:{position:"absolute",left:"0",right:"0",top:"64px"}}),Object(H.jsx)(l.a,{justify:"center",align:"middle",className:"h100",children:Object(H.jsx)(O.a,{title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",children:Object(H.jsx)(K,{})})})]})};!function(t){t.LOGIN="/login",t.EVENT="/",t.REGISTRATION="/registration"}(N||(N={}));var Q=[{path:N.LOGIN,exact:!0,component:B},{path:N.REGISTRATION,exact:!0,component:M}],X=[{path:N.EVENT,exact:!0,component:W}],Y=function(){var t=Object(d.g)(),e=T((function(t){return t.auth})),n=e.isAuth,r=e.user,a=P().logout;return Object(H.jsx)(u.a.Header,{children:Object(H.jsx)(l.a,{justify:"end",align:"middle",style:{height:"64px"},children:n?Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)("div",{style:{color:"white"},children:r.name}),Object(H.jsx)(j.a,{theme:"dark",mode:"horizontal",selectable:!1,children:Object(H.jsx)(j.a.Item,{onClick:function(){return a()},children:"\u0412\u044b\u0439\u0442\u0438"},1)})]}):Object(H.jsx)(j.a,{theme:"dark",mode:"vertical",selectable:!1,children:Object(H.jsx)(j.a.Item,{onClick:function(){return t.push(N.LOGIN)},children:"\u0412\u043e\u0439\u0442\u0438"},1)})})})},Z=function(){return T((function(t){return t.auth})).isAuth?Object(H.jsxs)(d.d,{children:[X.map((function(t){return Object(H.jsx)(d.b,{path:t.path,exact:t.exact,component:t.component},t.path)})),Object(H.jsx)(d.a,{to:N.EVENT})]}):Object(H.jsxs)(d.d,{children:[Q.map((function(t){return Object(H.jsx)(d.b,{path:t.path,exact:t.exact,component:t.component},t.path)})),Object(H.jsx)(d.a,{to:N.LOGIN})]})},$=(n(260),function(){var t=P(),e=t.getCurrentUser,n=t.setIsAuth;return Object(a.useEffect)((function(){D("token")&&(e(),n(!0))}),[]),Object(H.jsx)("div",{children:Object(H.jsxs)(u.a,{children:[Object(H.jsx)(Y,{}),Object(H.jsx)(u.a.Content,{children:Object(H.jsx)(Z,{})})]})})}),tt=n(150),et={isAuth:!1,error:"",isLoading:!1,isSuccess:!1,user:{}};var nt={todoList:[],isLoading:!1,error:""};var rt={auth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case A.SET_AUTH:return Object(g.a)(Object(g.a)({},t),{},{isAuth:e.payload,isLoading:!1});case A.SET_ERROR:return Object(g.a)(Object(g.a)({},t),{},{error:e.payload,isLoading:!1});case A.SET_IS_SUCCESS:return Object(g.a)(Object(g.a)({},t),{},{isSuccess:e.payload});case A.SET_IS_LOADING:return Object(g.a)(Object(g.a)({},t),{},{isLoading:e.payload});case A.SET_USER:return Object(g.a)(Object(g.a)({},t),{},{user:e.payload});default:return t}},todo:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case r.GET_TODO:return Object(g.a)(Object(g.a)({},t),{},{todoList:e.payload});case r.ADD_TODO:return Object(g.a)(Object(g.a)({},t),{},{todoList:t.todoList.concat(e.payload)});case r.UPDATE_TODO:return Object(g.a)(Object(g.a)({},t),{},{todoList:t.todoList.map((function(t){return t._id===e.payload._id?e.payload:t}))});case r.DELETE_TODO:return Object(g.a)(Object(g.a)({},t),{},{todoList:t.todoList.filter((function(t){return t._id!==e.payload}))});case r.SET_IS_LOADING:return Object(g.a)(Object(g.a)({},t),{},{isLoading:e.payload});case r.SET_ERROR:return Object(g.a)(Object(g.a)({},t),{},{error:e.payload,isLoading:!1});default:return t}}},at=Object(E.c)(rt),ct=Object(E.d)(at,Object(E.a)(tt.a));s.a.render(Object(H.jsx)(o.a,{store:ct,children:Object(H.jsx)(i.a,{children:Object(H.jsx)($,{})})}),document.getElementById("root"))}},[[261,1,2]]]);
//# sourceMappingURL=main.5383a796.chunk.js.map